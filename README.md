# æ…§æœ¬ (HuiBen)

ä¸€ä¸ªåŸºäº Flutter çš„æ™ºèƒ½é˜…è¯»åº”ç”¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“– æ™ºèƒ½ç¿»é¡µæ£€æµ‹ï¼šä½¿ç”¨ MobileNetV2 æ¨¡å‹è¿›è¡Œå®æ—¶ç¿»é¡µè¯†åˆ«
- ğŸ“± è·¨å¹³å°æ”¯æŒï¼šæ”¯æŒ Androidã€iOSå¹³å°
- ğŸ¯ é«˜æ€§èƒ½è®¾è®¡ï¼šä¼˜åŒ–äº†æ¨¡å‹æ¨ç†å’Œå›¾åƒå¤„ç†æµç¨‹

## ç¿»é¡µæ£€æµ‹æ€§èƒ½ä¼˜åŒ–

ä¸ºäº†è§£å†³æ¨¡å‹æ£€æµ‹æ—¶è¶Šæ¥è¶Šå¡çš„é—®é¢˜ï¼Œæˆ‘ä»¬åšäº†ä»¥ä¸‹å…³é”®ä¼˜åŒ–ï¼š

### 1. å¸§ç‡æ§åˆ¶
- **è·³å¸§å¤„ç†**ï¼šåªå¤„ç†æ¯ç¬¬ 5 å¸§ï¼Œå‡å°‘ 80% çš„è®¡ç®—é‡
- **æ—¶é—´é—´éš”æ§åˆ¶**ï¼šç¡®ä¿å¤„ç†é—´éš”è‡³å°‘ 3000ms
- **è‡ªé€‚åº”é¢‘ç‡**ï¼šæ ¹æ®è®¾å¤‡æ€§èƒ½åŠ¨æ€è°ƒæ•´

### 2. å¼‚æ­¥å¤„ç†ä¼˜åŒ–
- **é˜²å¹¶å‘å¤„ç†**ï¼šç¡®ä¿åŒæ—¶åªæœ‰ä¸€ä¸ªæ¨ç†ä»»åŠ¡è¿è¡Œ
- **è¶…æ—¶æœºåˆ¶**ï¼šå•æ¬¡å¤„ç†æœ€é•¿ 1 ç§’ï¼Œé˜²æ­¢å¡æ­»
- **èµ„æºç®¡ç†**ï¼šæ¯æ¬¡å¤„ç†åç«‹å³é‡Šæ”¾ ONNX å¼ é‡

### 3. å†…å­˜ä¼˜åŒ–
- **é¢„åˆ†é…å†…å­˜**ï¼šé¿å…é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œå›æ”¶
- **è¾¹ç•Œæ£€æŸ¥**ï¼šé˜²æ­¢æ•°ç»„è¶Šç•Œå¯¼è‡´çš„å´©æºƒ
- **åŠæ—¶é‡Šæ”¾**ï¼šä½¿ç”¨ try-finally ç¡®ä¿èµ„æºé‡Šæ”¾


## é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart              # åº”ç”¨å…¥å£
â”œâ”€â”€ pages/                 # é¡µé¢æ–‡ä»¶
â”‚   â”œâ”€â”€ home_page.dart    # ä¸»é¡µ
â”‚   â”œâ”€â”€ reading_page.dart # é˜…è¯»é¡µé¢
â”‚   â””â”€â”€ profile_page.dart # ä¸ªäººèµ„æ–™é¡µ
â””â”€â”€ services/             # æœåŠ¡å±‚
    â””â”€â”€ page_turn_detector.dart # ç¿»é¡µæ£€æµ‹æœåŠ¡
```

## å¼€å‘ç¯å¢ƒ

- Flutter SDK >= 3.0.0
- Dart >= 3.0.0
- Camera plugin
- ONNX Runtime

## å®‰è£…å’Œè¿è¡Œ

1. å…‹éš†é¡¹ç›®ï¼š
```bash
git clone <repository-url>
cd huiben
```

2. è·å–ä¾èµ–ï¼š
```bash
flutter pub get
```

3. é…ç½®å¯†é’¥ï¼š
   å‚è€ƒhttp://neuronx.top/2025/07/04/Flutter%E5%BC%80%E5%8F%91-%E5%AF%86%E9%92%A5%E4%BF%9D%E6%8A%A4/
   é…ç½®è‡ªå·±çš„apikeyç­‰

4. è¿è¡Œåº”ç”¨ï¼š
```bash
flutter run
```

## æ•…éšœæ’é™¤

### ç¿»é¡µæ£€æµ‹å¡é¡¿é—®é¢˜

å¦‚æœä»ç„¶é‡åˆ°æ€§èƒ½é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š

1. **è°ƒæ•´è·³å¸§æ•°**ï¼š
```dart
// åœ¨ page_turn_detector.dart ä¸­ä¿®æ”¹
static const int _maxFrameSkip = 10; // å¢åŠ è·³å¸§æ•°
```

2. **é™ä½ç›¸æœºåˆ†è¾¨ç‡**ï¼š
åœ¨ç›¸æœºé…ç½®ä¸­ä½¿ç”¨è¾ƒä½çš„åˆ†è¾¨ç‡

3. **è°ƒæ•´ç›¸ä¼¼åº¦é˜ˆå€¼**ï¼š
```dart
static const double _similarityThreshold = 0.6; // é™ä½é˜ˆå€¼
```

### å†…å­˜ä½¿ç”¨è¿‡é«˜

1. å®šæœŸè°ƒç”¨ `detector.dispose()` é‡Šæ”¾èµ„æº
2. åœ¨åº”ç”¨åå°æ—¶åœæ­¢æ£€æµ‹ï¼š`detector.stopDetection()`
3. ç›‘æ§å†…å­˜ä½¿ç”¨ï¼Œå¿…è¦æ—¶é‡å¯æ£€æµ‹å™¨

